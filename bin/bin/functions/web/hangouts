#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Web
# ══════════════════════════════════════════════════════════════════════════════

# .............................................................. Google hangouts

QUTEBROWSER='/usr/bin/qutebrowser --target tab --override-restore'
HANGOUTS=$SESSION/hangouts

# surf -z1.15 -C $(dirname $0)/.hangouts:stylesheet.css $(cat $HANGOUTS) &  # fit input field
$QUTEBROWSER $(cat $HANGOUTS) &
xsync 'Gmail'

if [ -e $HLWM:hangouts ] ;then
  keyboard off  # disable keyboard to prevent disrupting following :command
  sleep 1       # pause long enough for window focus
  xdotool key 'Y'
  keyboard on   # enable keyboard
else
  notify 15 critical 'MESSAGE \ hangouts' '"Permission request" response required'
  touch $HLWM:hangouts
fi

# vim: set ft=sh: #
