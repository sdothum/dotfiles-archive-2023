#!/usr/bin/dash

# Log
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ${_colors_} defined in .zshenv

# ...................................................................... Comment

# initial leader
[ $leader ] || leader='.'

__annotate() {
  while read line
  do
    # indent=$(echo "$(tput cols) - $(echo $line | wc -L) - 3" | bc)
    indent=$(( $(tput cols) - $(echo $line | wc -L) - 3 ))
    [ $indent -gt 0 ] && leader=$(head -c $indent </dev/zero | tr '\0' "$leader")
    log "${_CYAN_}⚡ $leader $line${_nocolor_}"
    leader=' '
  done
}

echo $@ | __annotate
unset leader

# vim: set ft=sh: #
