#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Office
# ══════════════════════════════════════════════════════════════════════════════

# ...................................................... monospace double widths

usage() { echo "usage: $(basename $0) [--emdash] [family]"; exit 1; }

[ "$1" = '--emdash' ] && { emdash=--; shift; }
[ $2 ] && usage
FONT=$HOME/.fonts/${1:-iosevka}
family=${FONT##*/}
cd $FONT 2>/dev/null || usage

# see make_install iosevka
ifyes 'add double width characters' || exit

# double width emdash (or '--') and ellipsis
if [ $emdash ] ;then
  echo "
Open(\$1);
Select(0u268b);
Copy();
Select(0u2014);
Paste();
Transform(200,0,0,100,100,0);
Select(0u2026);
Transform(200,0,0,200,100,0);
ChangeWeight(-100);
Move(0,-40);
Generate(\$1);
"
else
  echo "
Open(\$1);
Select(0u2012);
Copy();
Select(0u2014);
Paste();
Transform(200,0,0,100,100,0);
Select(0u2026);
Transform(200,0,0,200,100,0);
ChangeWeight(-100);
Move(0,-40);
Generate(\$1);
"
fi >/tmp/fontforge.script

for i in *.ttf ;do
  ditto emdash $i
  fontforge --script /tmp/fontforge.script $i
done

# vim: set ft=sh: #
